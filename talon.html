<!DOCTYPE html>
<html lang="en"
>
<head>
    <title>Talon - :(){:|:&};:</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="/talon.html">

        <meta name="author" content="William Mak" />
        <meta name="description" content="What the hell is Talon and what does it do?" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="/theme/css/style.css" type="text/css"/>


</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">
:(){:|:&};:            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li >
                            <a href="/category/dotfiles.html">Dotfiles</a>
                        </li>
                        <li >
                            <a href="/category/general.html">General</a>
                        </li>
                        <li >
                            <a href="/category/hermes.html">Hermes</a>
                        </li>
                        <li >
                            <a href="/category/iris.html">Iris</a>
                        </li>
                        <li class="active">
                            <a href="/category/programming.html">Programming</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="/talon.html"
                       rel="bookmark"
                       title="Permalink to Talon">
                        Talon
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2014-09-18T11:54:00"> Thu 18 September 2014</time>
    </span>



    
</footer><!-- /.post-info -->                    </div>
                </div>
                <h1>Talon</h1>
<p>Talon is a relatively trivial way of storing latitude and longitude in 4 unicode
characters. It's intent is to shorten location urls when you're mentioning
somewhere to someone and want to send that in a url. Before Talon the only way
to send a location to someone else would be to go into google maps, find that
location and then grab the url which would look something like the following:
<a href="https://www.google.ca/maps/@38.6059681,-28.0261396,16z?hl=en">https://www.google.ca/maps/@38.6059681,-28.0261396,16z?hl=en</a>
Even then the location given is just a region of the map, if you wanted a Marker
at that location the best way to do that is to ask for directions to that spot
and then grab the url again, which looked something like this: <a href="https://www.google.ca/maps/dir//38.603654,-28.0262469/@38.6036228,-28.1636668,11z/data=!3m1!4b1!4m3!4m2!1m0!1m0?hl=en">https://www.google.ca/maps/dir//38.603654,-28.0262469/@38.6036228,-28.1636668,11z/data=!3m1!4b1!4m3!4m2!1m0!1m0?hl=en</a>
These urls are much too long to send to someone over a chat window or within a
tweet or in a text message. This is where Talon comes in, talon takes what would
have been these long urls and shortens them to something nice like this: 
<a href="http://wmak.io/talon.html?♁踷똊Ⴓ齼">http://wmak.io/talon.html?♁踷똊Ⴓ齼</a>
this isn't a url shortener rather Talon encodes a latitude and longitude up to
to seven decimal places. Which means the location stored is 
<a href="http://gis.stackexchange.com/questions/8650/how-to-measure-the-accuracy-of-latitude-and-longitude">accurate up to 11mm.</a></p>
<h1>So how does Talon work?</h1>
<p>Talon has 4 characters to work with, and given the state of the web these
characters can be assumed to be in utf8. This means that there are 65535
possible symbols per character. Talon assumes the first two represent Latitude,
And the second two represent Longitude. The possible combinations per set of
characters then is 4294836225. We also know the range of possible numbers.
Latitude which is from -90.0000000 to 90.0000000 and Longitude which is from
-180.0000000 to 180.0000000. Become of the limitations of the combinations the
first value can be 0, 1, 2, or 3 if the first number was 4 then the second
number would be limited to 2, and so on. In which case the numbers were used as
flags:</p>
<ul>
<li>0 means the number is negative</li>
<li>1 means the number is negative and below 90</li>
<li>2 means the number is positive</li>
<li>3 means the number is positive and above 90</li>
</ul>
<p>So to store a number n the algorithm would be as follows:</p>
<ol>
<li>Which flag does the number fall under? set the first digit as such.</li>
<li>If abs(n) &gt; 90 then let n ±= 90 so that abs(n) &lt;= 90</li>
<li>Remove the decimal point from n</li>
<li>Append the digits of n to the result</li>
<li>Truncate the result so that it's 10 characters long</li>
<li>Find the Hexidecimal representation of the result</li>
<li>The final result then is the unicode representation of the first 4 characters
   of the hex and the last 4 characters of the hex.</li>
</ol>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3 well well-sm" id="sidebar">

<aside>
    <section>
        <ul class="list-group list-group-flush">
                <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
                  <ul class="list-group" id="social">
                    <li class="list-group-item"><a href="https://github.com/wmak"><i class="fa fa-github-square fa-lg"></i> github</a></li>
                    <li class="list-group-item"><a href="https://plus.google.com/u/0/+WilliamMak"><i class="fa fa-google-square fa-lg"></i> google</a></li>
                    <li class="list-group-item"><a href="http://www.linkedin.com/pub/william-mak/66/b1b/a52"><i class="fa fa-linkedin-square fa-lg"></i> LinkedIn</a></li>
                    <li class="list-group-item"><a href="/content/resume.pdf"><i class="fa fa-resume-square fa-lg"></i> resume</a></li>
                    <li class="list-group-item"><a href="talon.html"><i class="fa fa-talon-square fa-lg"></i> talon</a></li>
                  </ul>
                </li>



                <li class="list-group-item"><a href="/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                    <ul class="list-group " id="tags">
                    </ul>
                </li>    

        </ul>
    </section>

</aside>        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2014 William Mak
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="/theme/js/respond.min.js"></script>

    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-48091655-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->
</body>
</html>